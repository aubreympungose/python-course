{"title":"Importing Data and Reproducible Workflows","markdown":{"yaml":{"title":"Importing Data and Reproducible Workflows","code-copy":true,"code-line-numbers":true,"tidy":true},"headingText":"6.1 Importing data","containsRefs":false,"markdown":"\n\nAll along we have been working with data stored as packages in R or fake data. But most of the time data is stored locally on our computers either as .csv, Excel, .txt, pdf, etc. There are functions to import these data types, both in Base R and external packages. But first you will need to tell R the location of the data.\n\n\nTo import csv, you can use the `read.csv()` function. In my case I have dataset saved as \"epi_data.csv\" in the the folder named \"data\":\n\n```{r}\n\ndata <- read.csv(\"data/epi_data.csv\")\n\nhead(data)\n```\n\n\nLet us say te same data is saved in as aan Excel workbook with an extension .xlsx, we can use `reaedxl` package:\n\n```{r, eval=FALSE}\ninstall.packages(\"reaedxl\")\n```\n\n```{r}\nlibrary(readxl)\n\nexcel_data <- read_excel(\"data/epi_data.xlsx\")\n\nhead(excel_data)\n```\n\n\nThere are other arguments that can be added; for example if you data is on sheet number 2 of Exel workbook, you will add an `sheet = 2` argument. \n\n\nYou can import data from other statistical software as well:\n\n- Read STATA files: STATA data files end with .dta extensions: `read_dta()` from `Haven` package can import this data type\n\n- Read SPPS files: SPSS files end with .sav extension: `read_sav()` function, also from `Haven` can import it.\n\nR can import other many data types such shapefiles, images, PDFs and data from the web.\n\n\n## 6.2 Importing Multiple files\n\nSometimes there are many files and it would be time consuming to load each file. I will show you the following with instructions\n\n```{r}\n## First list the path where files are stored\n\npath <- list.files(\"data\", pattern = \".csv$\", full.names = TRUE) \n\n## Read all the files by using lapply function\ndata_files <- lapply(path, read.csv)\n```\n\nnow you have a list with 2 elements. You can extract each element:\n\n```{r}\nfirst_df <- data_files[[1]]\n\nhead(first_df)\n```\n\n```{r}\nsecond_df <- data_files[[2]]\n\nhead(second_df)\n```\n        \n\n## 6.3 Exporting data\n\nAfter you have cleaned and prepared your data for analysis, you may want to save cleaned data. \n\n```{r}\ngapminder <- gapminder::gapminder\n\ngapminder_2007 <- gapminder |> \n  dplyr::filter(year == 2007)\n\nwrite.csv(gapminder_2007, \"data/gapminder_cleaned.csv\")\n```\n\nNot that your my path \"data/gapminder_cleaned.csv\" will be different yours. \n\n\n\n##6.4 Setting working directories\n\nWhen working on a project, it may be important to set a working directory, where all you files are stores: data, code, reports, etc. You can use `setwd()` function. Let's say we have a folder with all the files:\n\n- my_folder\n\n    - data\n    - code\n    - report\n    \nYou will need to set a working directory as:\n\n```{r}\nsetwd(\"C:/Users/mpungosea/my_folder\")\n```\n\nTo navigate to a specific file, you will have to use relative paths. You starting path would be \"my_folder\". If you want to load data, you would have to navigate to \"data\" directory:\n\n```{r}\ndata <- read.csv(\"data/epi_data.csv\")\n\nhead(data)\n```\n\n\n## 6.5 Managing reproducible workflows\n\nThe problem with the above approach, of setting working directories, is that your directories are local to your computer. We share code with other people: reviewers, team members, etc. We also collaborate with one another. Now imagine that I have \"C:/Users/mpungosea/my_folder\" as my working directory. Will this work on your computer? **NO!** In Other instances, you may move files; if you run the code and set the director, R will return an error. This means that your workflows are not reproducible and it is not an efficient way of working. \n\nEnter RStudio Projects. In Projects, we want to keep all the files that were working with and making it easier to navigate directories and share your work. To start a new project, follow these steps:\n\n\n![](images/week_5/r_project_1.png)\n\n![](images/week_5/r_project_2.png)\n![](images/week_5/r_project_3.png)\n![](images/week_5/r_project_4.png)\n![](images/week_5/r_project_5.png)\n\n\n\nInside the project, you can add the follwoing directories/folders:\n\n- data: to save all your data files: raw data, cleaned data, analysis data, etc\n\n- code: save all your scripts: data cleaning, analysis, etc\n\n- outputs: figures, tables, etc\n\n- reports: draft reports final reports, etc\n\n- bibliogaphy: a bibtex file with the list of references. \n\nIn one of my projects, this is how it looks:\n\n![](images/week_5/sample_project.png)\n\nEvery time you work on the project, you then open the `.Rproj` file, it will have all the files associated with the project:\n\n![](images/week_5/sample_project_2.png)","srcMarkdownNoYaml":"\n\nAll along we have been working with data stored as packages in R or fake data. But most of the time data is stored locally on our computers either as .csv, Excel, .txt, pdf, etc. There are functions to import these data types, both in Base R and external packages. But first you will need to tell R the location of the data.\n\n## 6.1 Importing data\n\nTo import csv, you can use the `read.csv()` function. In my case I have dataset saved as \"epi_data.csv\" in the the folder named \"data\":\n\n```{r}\n\ndata <- read.csv(\"data/epi_data.csv\")\n\nhead(data)\n```\n\n\nLet us say te same data is saved in as aan Excel workbook with an extension .xlsx, we can use `reaedxl` package:\n\n```{r, eval=FALSE}\ninstall.packages(\"reaedxl\")\n```\n\n```{r}\nlibrary(readxl)\n\nexcel_data <- read_excel(\"data/epi_data.xlsx\")\n\nhead(excel_data)\n```\n\n\nThere are other arguments that can be added; for example if you data is on sheet number 2 of Exel workbook, you will add an `sheet = 2` argument. \n\n\nYou can import data from other statistical software as well:\n\n- Read STATA files: STATA data files end with .dta extensions: `read_dta()` from `Haven` package can import this data type\n\n- Read SPPS files: SPSS files end with .sav extension: `read_sav()` function, also from `Haven` can import it.\n\nR can import other many data types such shapefiles, images, PDFs and data from the web.\n\n\n## 6.2 Importing Multiple files\n\nSometimes there are many files and it would be time consuming to load each file. I will show you the following with instructions\n\n```{r}\n## First list the path where files are stored\n\npath <- list.files(\"data\", pattern = \".csv$\", full.names = TRUE) \n\n## Read all the files by using lapply function\ndata_files <- lapply(path, read.csv)\n```\n\nnow you have a list with 2 elements. You can extract each element:\n\n```{r}\nfirst_df <- data_files[[1]]\n\nhead(first_df)\n```\n\n```{r}\nsecond_df <- data_files[[2]]\n\nhead(second_df)\n```\n        \n\n## 6.3 Exporting data\n\nAfter you have cleaned and prepared your data for analysis, you may want to save cleaned data. \n\n```{r}\ngapminder <- gapminder::gapminder\n\ngapminder_2007 <- gapminder |> \n  dplyr::filter(year == 2007)\n\nwrite.csv(gapminder_2007, \"data/gapminder_cleaned.csv\")\n```\n\nNot that your my path \"data/gapminder_cleaned.csv\" will be different yours. \n\n\n\n##6.4 Setting working directories\n\nWhen working on a project, it may be important to set a working directory, where all you files are stores: data, code, reports, etc. You can use `setwd()` function. Let's say we have a folder with all the files:\n\n- my_folder\n\n    - data\n    - code\n    - report\n    \nYou will need to set a working directory as:\n\n```{r}\nsetwd(\"C:/Users/mpungosea/my_folder\")\n```\n\nTo navigate to a specific file, you will have to use relative paths. You starting path would be \"my_folder\". If you want to load data, you would have to navigate to \"data\" directory:\n\n```{r}\ndata <- read.csv(\"data/epi_data.csv\")\n\nhead(data)\n```\n\n\n## 6.5 Managing reproducible workflows\n\nThe problem with the above approach, of setting working directories, is that your directories are local to your computer. We share code with other people: reviewers, team members, etc. We also collaborate with one another. Now imagine that I have \"C:/Users/mpungosea/my_folder\" as my working directory. Will this work on your computer? **NO!** In Other instances, you may move files; if you run the code and set the director, R will return an error. This means that your workflows are not reproducible and it is not an efficient way of working. \n\nEnter RStudio Projects. In Projects, we want to keep all the files that were working with and making it easier to navigate directories and share your work. To start a new project, follow these steps:\n\n\n![](images/week_5/r_project_1.png)\n\n![](images/week_5/r_project_2.png)\n![](images/week_5/r_project_3.png)\n![](images/week_5/r_project_4.png)\n![](images/week_5/r_project_5.png)\n\n\n\nInside the project, you can add the follwoing directories/folders:\n\n- data: to save all your data files: raw data, cleaned data, analysis data, etc\n\n- code: save all your scripts: data cleaning, analysis, etc\n\n- outputs: figures, tables, etc\n\n- reports: draft reports final reports, etc\n\n- bibliogaphy: a bibtex file with the list of references. \n\nIn one of my projects, this is how it looks:\n\n![](images/week_5/sample_project.png)\n\nEvery time you work on the project, you then open the `.Rproj` file, it will have all the files associated with the project:\n\n![](images/week_5/sample_project_2.png)"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":"auto","echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":true,"code-line-numbers":true,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","filters":["../include-files.lua","quarto"],"css":["../styles.css"],"toc":true,"output-file":"week-5.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.433","theme":{"light":"cosmo","dark":["cosmo","../theme-dark.scss"]},"code-background":true,"code-copy":true,"title":"Importing Data and Reproducible Workflows","tidy":true},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}